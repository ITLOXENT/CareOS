repos:
  - repo: local
    hooks:
      - id: guardrails-placeholders
        name: Guardrails - placeholders
        entry: python scripts/guardrails/check_no_placeholders.py
        language: system
        pass_filenames: false
      - id: guardrails-secrets
        name: Guardrails - secrets
        entry: python scripts/guardrails/check_no_secrets.py
        language: system
        pass_filenames: false
      - id: guardrails-iac
        name: Guardrails - IaC
        entry: python scripts/guardrails/check_iac.py
        language: system
        pass_filenames: false
      - id: lint-python
        name: Ruff lint
        entry: bash -c "cd apps/api && python -m ruff check ."
        language: system
        pass_filenames: false
      - id: format-python
        name: Ruff format check
        entry: bash -c "cd apps/api && python -m ruff format --check ."
        language: system
        pass_filenames: false
      - id: typecheck-python
        name: Mypy
        entry: bash -c "cd apps/api && python -m mypy ."
        language: system
        pass_filenames: false
      - id: test-python
        name: Pytest
        entry: bash -c "cd apps/api && python -m pytest -q"
        language: system
        pass_filenames: false
      - id: lint-js
        name: ESLint
        entry: pnpm -r lint
        language: system
        pass_filenames: false
      - id: format-js
        name: Prettier check
        entry: pnpm exec prettier --check .
        language: system
        pass_filenames: false
      - id: typecheck-js
        name: TypeScript
        entry: pnpm -r typecheck
        language: system
        pass_filenames: false
      - id: test-js
        name: JS tests
        entry: pnpm -r test --if-present
        language: system
        pass_filenames: false
      - id: audit
        name: Dependency audit
        entry: bash -c "cd apps/api && python -m pip_audit -r requirements.txt -r requirements-dev.txt && pnpm audit"
        language: system
        pass_filenames: false
